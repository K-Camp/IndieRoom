<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          <h3><%= @post.post_title %></h3>
        </div>

        <div class="card-body">
          <p><strong>投稿者:</strong> <%= @post.user.user_name %></p>
          <p><strong>作成日:</strong> <%= @post.created_at.strftime("%Y/%m/%d %H:%M") %></p>
          <hr>
          <p><%= simple_format(@post.content) %></p>

          <% if @post.game.game_image.attached? %>
            <div class="mt-3 text-center">
              <%= image_tag @post.game.game_image, size: "300x300", class: "img-fluid rounded", style: "max-height: 400px;" %>
            </div>
          <% end %>
        </div>

        <div class="card-footer text-end">
          <!-- ログインユーザが投稿主の場合 -->
          <% if user_signed_in? && current_user == @post.user %>
            <%= link_to edit_post_path(@post), class: "btn btn-outline-primary mr-2" do %>
              <i class="fas fa-edit mr-1"></i> 編集
            <% end %>

            <%= link_to post_path(@post), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn btn-outline-danger mr-2" do %>
              <i class="fas fa-trash-alt mr-1"></i> 削除
            <% end %>

            <%= link_to "戻る", request.referer || root_path, class: "btn btn-secondary" %>

          <!-- ログインユーザが投稿主ではない場合 -->
          <% elsif user_signed_in? %>
            <!-- request.refererは直前に開いていたページ戻る、直前に何も開いていない場合はtopページに戻る -->
            <%= link_to "戻る", request.referer || root_path, class: "btn btn-secondary" %>

          <!-- ログインしていない場合 -->
          <% else %>
            <%= link_to "戻る", request.referer || root_path, class: "btn btn-secondary" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
